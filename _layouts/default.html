<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/images/icons/icon-152x152.png">
    <!-- theme-color defines the top bar color-->
    <meta name="theme-color" content="#575757"/>

    <!-- Add to home screen for Safari on iOS-->
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
    <meta name="apple-mobile-web-app-title" content="MiRaNo"/>
    <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png"/>

    <!-- Add to home screen for Windows-->
    <meta name="msapplication-TileImage" content="/images/icons/icon-152x152.png"/>
    <meta name="msapplication-TileColor" content="#575757"/>

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>{{ page.title }}</title>
    {% include openGraph.html %}
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="{{page.description}}">
    <meta name="keywords" content="{{page.keywords}}">
    <meta property="fb:pages" content="1029758320473951" />
    <link rel="alternate" type="application/rss+xml" title="{{ site.name }}" href="{{ site.url }}/feed.xml">
    <link rel="shortcut icon" href="/favicon.ico" />
    {% if page.path contains '_posts' %}
      <link rel="amphtml" href="{{site.url}}/{{site.ampdir}}{{page.id}}">
    {% endif %}

    <link href="https://fonts.googleapis.com/css?family=Khula" rel="stylesheet">
    <style amp-custom>
      {% include syntax.css %}
      {% capture include_to_scssify %}
        {% include main.scss %}
      {% endcapture %}
      {{ include_to_scssify | scssify }}
    </style>
    <!-- Google Analytics -->
    <script>
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'UA-49969634-1', 'pauldambra.github.io');
    ga('send', 'pageview');
    </script>

    <script async src='https://www.google-analytics.com/analytics.js'></script>

    <!-- End Google Analytics -->
    <meta name="msvalidate.01" content="54691C3C7B863CEE60F0305D6EDFF7A8" />
    <meta name="google-site-verification" content="hLKEdujpXNQ9PSZWEcQkwxCgL2z1tWxVedeaUmttH7c" />
  </head>
  <body>
    {% include header.html %}
    <div class="main">
      {{ content }}
    </div>
    {% include footer.html %}

    {% if page.path contains '_posts' %}
    <script>
      var tsl = document.getElementById('twitter-share-link')
      tsl.addEventListener('click', function() {
        ga('send', {
          hitType: 'social',
          socialNetwork: 'twitter',
          socialAction: 'tweet',
          socialTarget: "{{site.url}}{{page.url}}"
        });
      });

      var fsl = document.getElementById('facebook-share-link')
      fsl.addEventListener('click', function() {
        ga('send', {
          hitType: 'social',
          socialNetwork: 'facebook',
          socialAction: 'share',
          socialTarget: "{{site.url}}{{page.url}}"
        });
      });
    </script>
    {% endif %}
    <script>
    //from https://raw.githubusercontent.com/GoogleChrome/sw-precache/master/demo/app/js/service-worker-registration.js
      /* eslint-env browser */
      'use strict';

      if ('serviceWorker' in navigator) {
        // Delay registration until after the page has loaded, to ensure that our
        // precaching requests don't degrade the first visit experience.
        // See https://developers.google.com/web/fundamentals/instant-and-offline/service-worker/registration
        window.addEventListener('load', function() {
          // Your service-worker.js *must* be located at the top-level directory relative to your site.
          // It won't be able to control pages unless it's located at the same level or higher than them.
          // *Don't* register service worker file in, e.g., a scripts/ sub-directory!
          // See https://github.com/slightlyoff/ServiceWorker/issues/468
          navigator.serviceWorker.register('/service-worker.js').then(function(reg) {
            // updatefound is fired if service-worker.js changes.
            reg.onupdatefound = function() {
              // The updatefound event implies that reg.installing is set; see
              // https://w3c.github.io/ServiceWorker/#service-worker-registration-updatefound-event
              var installingWorker = reg.installing;

              installingWorker.onstatechange = function() {
                switch (installingWorker.state) {
                  case 'installed':
                    if (navigator.serviceWorker.controller) {
                      // At this point, the old content will have been purged and the fresh content will
                      // have been added to the cache.
                      // It's the perfect time to display a "New content is available; please refresh."
                      // message in the page's interface.
                      console.log('New or updated content is available.');
                    } else {
                      // At this point, everything has been precached.
                      // It's the perfect time to display a "Content is cached for offline use." message.
                      console.log('Content is now available offline!');
                    }
                    break;

                  case 'redundant':
                    console.error('The installing service worker became redundant.');
                    break;
                }
              };
            };
          }).catch(function(e) {
            console.error('Error during service worker registration:', e);
          });
        });
      }
    </script>
  </body>
</html>