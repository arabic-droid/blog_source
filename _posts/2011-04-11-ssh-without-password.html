---
title: "SSH without password"
layout: "post"
permalink: "/2011/04/ssh-without-password.html"
uuid: "5166345379795934458"
guid: "tag:blogger.com,1999:blog-6728560442491983758.post-5166345379795934458"
date: "2011-04-11 09:05:00"
updated: "2011-04-11 12:49:19"
description: 
blogger:
    siteid: "6728560442491983758"
    postid: "5166345379795934458"
    comments: "0"
categories: 
author: 
    name: "Paul D'Ambra"
    url: "https://plus.google.com/114260096260757534167?rel=author"
    image: "//lh5.googleusercontent.com/-nN3yNuaSWDs/AAAAAAAAAAI/AAAAAAAABQU/ESeyTW5Duf0/s512-c/photo.jpg"
---

<div>
I've resolved to learn more about linux and have been slowly boggling at how easy some tasks are in comparison to the MS world...<br /><br />Recently I've been working on what was intended to be a small and straight-forward website that has rapidly grown to be a large behemoth that will take credit card payments. So I need revision control. <br /><br />Also, the site uses Drupal and Drupal use GIT for revision control. We're building a custom module and we'd like to contribute it back once it is done so we may as well use GIT now to make life easy.<br /><br />Pretty exciting I can commit my changes and they are automatically pushed over to my test server on commit and then if I like them I can push them to my live server. Both pushes are by SSH and both times I have to type in a different, long, complex password.<br /><br />Frustrating and inefficient for a god of business whose time is so important - no...<br /><br />But the interwebs tell me that you can set up SSH so you don't need a password. They also tell me in a vaguely confusing manner... my resolve now is to add another vaguely confusing explanation to the interwebs.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/-ogY-p6dRbUs/TaLFdgeiXlI/AAAAAAAAANY/zIbVsfwaGzQ/s1600/floor_one.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 278px;" src="http://1.bp.blogspot.com/-ogY-p6dRbUs/TaLFdgeiXlI/AAAAAAAAANY/zIbVsfwaGzQ/s400/floor_one.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5594250797872471634" /></a><br /><br />The task is to set my client.local machine to be able to SSH onto server.remote without any passwords changing hands.<br /><br />This was relatively straight forward on my Mac and on my ubuntu box but of course my main dev machine is Windows 7...<br /><br /><span style="font-style:italic;">As an aside switching from Mac, to vmware fusion Windows, to vmware fusion, to Windows 7 and remoting between them means I *never* know which key is going to be @ and which " and the windows machines get reset to US keyboard every so often by the Macs which throws a spanner in the works.</span><br /><br />On a linux or unix machine this turned out to be pretty straight forward<br /><br />1) Login to client.local<br />2) run ssh-keygen -t rsa<br />3) alter the path offered to rename the file sensibly in my case ~/.ssh/rsa_server.remote<br />4) ssh-copy-id -i ~/.ssh/rsa_server.remote.pub '-p 8901 dinglehopper@server.remote'<br /><blockquote>here note that I had to surround with single quotes the -p etc section of the command in order to use a non standard port</blockquote><br />5) still on client.local edit ~/.ssh/config to add<br /><br /><blockquote>Host server.remote<br />       <blockquote>IdentityFile ~/.ssh/rsa_server.remote</blockquote></blockquote><br /><br />6) type ssh dinglehopper@server.remote -p 8901 and watch in awe and wonder<br /><br />Things aren't quite so straightforward on Windows but the basic steps remain.<br /><br />On Windows I use the excellent PuTTy to enable all things SSHy and I'm going to behave as if you do to...<br /><br />First things first ssh onto server.remote as the user you want to use in future  eg dinglehopper@server.remote and:<br /><br />on your Windows clinet.local fire up puttygen.exe and hit generate. As a bit of fun you are asked to wiggle your mouse in order to provide randomness (I wonder if this is placebo)<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/-XCmyhromqcY/TaL4vMTP3uI/AAAAAAAAAOo/pcakvSyDlIU/s1600/generating.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 386px;" src="http://4.bp.blogspot.com/-XCmyhromqcY/TaL4vMTP3uI/AAAAAAAAAOo/pcakvSyDlIU/s400/generating.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5594307176787074786" /></a><br /><br />Once this is generated you'll see a box marked "Public key for pasting into authorized_keys file". Can you guess what that's for?<br /><br />So grab that text in your clipboard, fire up ssh and connect to server.remote as the user you want to log in as.<br />Then run echo "<paste text here>" ~/.ssh/authorized_keys<br /><br />Now we need to configure PuTTy. So open PuTTy and either load a profile or start a new one. First we scroll down in the tree view to Connection > Data and put in the username we want to connect as...<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/-oYtOIQEPgV0/TaL3d9ld-dI/AAAAAAAAAOY/lt6Ugaf9E0A/s1600/auto-username.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 385px;" src="http://1.bp.blogspot.com/-oYtOIQEPgV0/TaL3d9ld-dI/AAAAAAAAAOY/lt6Ugaf9E0A/s400/auto-username.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5594305781267560914" /></a><br /><br />Then you move to Connection > SSH > Auth and enter the private key file that puttygen created...<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/-mGRlfc_0eTc/TaL3rW1MmOI/AAAAAAAAAOg/yXxVcK29u1s/s1600/identity-file.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 385px;" src="http://2.bp.blogspot.com/-mGRlfc_0eTc/TaL3rW1MmOI/AAAAAAAAAOg/yXxVcK29u1s/s400/identity-file.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5594306011382716642" /></a><br /><br />Now save this profile so you can just fire up the connection in future and away you go...<br /><br />Now my git push doesn't bother me for a password.<br /><br />There are obvious security concerns with passwordlessness so be mindful!
</div>