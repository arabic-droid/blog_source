---
title: "Testing With Browserstack and Selenium"
layout: "post"
permalink: "/2014/03/testing-with-browserstack-and-selenium.html"
uuid: "4673132191976833110"
guid: "tag:blogger.com,1999:blog-6728560442491983758.post-4673132191976833110"
date: "2014-03-25 22:57:00"
updated: "2014-03-29 19:06:48"
description: 
blogger:
    siteid: "6728560442491983758"
    postid: "4673132191976833110"
    comments: "0"
categories: 
author: 
    name: "Paul D'Ambra"
    url: "https://plus.google.com/114260096260757534167?rel=author"
    image: "//lh5.googleusercontent.com/-nN3yNuaSWDs/AAAAAAAAAAI/AAAAAAAABQU/ESeyTW5Duf0/s512-c/photo.jpg"
---

<div>
This post is part of a series where I'm hoping to prove to myself that building a dynamic website without a CMS is comparable to building one with a known CMS.&nbsp;<a href="http://mindlessramblingnonsense.blogspot.co.uk/2014/02/websites-cms.html" target="_blank">See the first post for an explanation of why</a><br /><br /><div style="text-align: right;"><a href="http://mindlessramblingnonsense.blogspot.co.uk/2014/03/website-cms-display-pages-part-2.html" style="float: left;">Previous Post</a><a href="https://www.blogger.com/blogger.g?blogID=6728560442491983758#" style="float: right;"></a></div><h1 style="clear: both;">Browserstack</h1>I love <a href="http://www.browserstack.com/" target="_blank">BrowserStack</a>'s awesome service. It allows you to test your websites on different browsers and operating systems. Helping reduce the need to have access to physical devices for testing and reproducing bugs.<br /><h1>Selenium WebDriver</h1>BrowserStack allow automation using a Selenium web driver. You can access this with Python, Ruby, Java, C#, Perl, PHP, or Node.js. It is also possible to test publicly or locally available sites using BrowserStack.<br /><br />However, after a couple of hours trying to write tests following <a href="http://www.browserstack.com/automate/node" target="_blank">the documentation</a> and attacking Google I wasn't getting very far. I was able to run tests on Browserstack and take screenshots to prove the page was loaded but I couldn't assert against the page. Frustration had begun to build!<br /><br />I haven't used Selenium before and&nbsp;I just didn't grok how to assert against the page.&nbsp;&nbsp;I'm sure it was how I was reading the documentation but I wasn't moving forward<br /><br />And then I discovered <a href="http://nightwatchjs.org/" target="_blank">nightwatch</a> (by reading to the end of the documentation but still...)<br /><h1>Nightwatch</h1>Nightwatch is awesome! It only took a few minutes to get to the point where it was possible to run tests using it. The API is terse and expressive and it will output jUnit results so can be plugged into a CI pipeline.<br /><br />A nightwatch test for the front page looks like:<br /><br /><script src="http://gist-it.appspot.com/github/pauldambra/omniclopse/blob/ba6e169be1043f88ce5482eddd55a065648e9ba2/end-to-end-tests/homepageSpec.js"></script> This demonstrates a very clear API. Load the page, wait till the body is visible, then assert that the carousel is present. <br /><br /><h3>How to run the tests</h3>Running this at the terminal using:<br />nightwatch -t end-to-end-tests/* -c end-to-end-tests/settings.json<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-git_2oBBEY0/UzL31ICAbyI/AAAAAAAAPzc/g9yrYEFFM5A/s1600/Screenshot+2014-03-26+15.47.42.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-git_2oBBEY0/UzL31ICAbyI/AAAAAAAAPzc/g9yrYEFFM5A/s1600/Screenshot+2014-03-26+15.47.42.png" height="320" width="309" /></a></div>Here the settings file sets the location of the tests folder(s), how and where to start Selenium and the capabilities of the browser to use for tests. Also my, fiendishly obduscated, browserstack credentials<br /><br />Passing in a settings file like this means that different browser settings can be setup and run separately. For example:<br /><pre>nightwatch -t end-to-end-tests/* -c end-to-end-tests/settingsWindowsFirefox.json<br />nightwatch -t end-to-end-tests/* -c end-to-end-tests/settingsOSXFirefox.json<br />nightwatch -t end-to-end-tests/* -c end-to-end-tests/settingsIPhone.json<br />nightwatch -t end-to-end-tests/* -c end-to-end-tests/settingsAndroid.json</pre><br />Which would allow running all of the nightwatch tests against different operating systems and browsers on BrowserStack.<br /><h3>Viewing results</h3>Results from the tests are displayed in the console:<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-ojJWDtj8QLk/UzIFv7l2dYI/AAAAAAAAPtg/SshkF0dIqno/s1600/Screenshot+2014-03-25+22.12.42.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://2.bp.blogspot.com/-ojJWDtj8QLk/UzIFv7l2dYI/AAAAAAAAPtg/SshkF0dIqno/s1600/Screenshot+2014-03-25+22.12.42.png" height="87" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Click to embiggen if you can't read this</td></tr></tbody></table><h2>Some more realistic tests for the home page</h2>Switching out the test for carousel by id and instead testing by class (as this is less likely to change) and adding in some other tests for the page contents gives:<br /><div><script src="http://gist-it.appspot.com/github/pauldambra/omniclopse/blob/25217572b4b77a9b90d25bba69b37b2cb411b4a6/end-to-end-tests/homepageSpec.js"></script> </div><h1>TL;DR</h1><div>The combination of BrowserStack and Nightwatch made for a fantastic experience. This is definitely going to be something I wrap into my day-to-day work.</div>
</div>