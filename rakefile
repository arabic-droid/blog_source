
task :clean do
	`jekyll clean`
end

task build: [:clean] do
	`jekyll build`
end

task :deploy_site do
	if ENV["$TRAVIS_PULL_REQUEST"] then
		puts "don't publish site for pull requests"
		return
	end

	if ENV["$TRAVIS_BRANCH"] != "master" then
		puts "only publish the master branch"
		return
	end

	sh('git config user.name "Travis CI"')
	sh('git add _site')
	sh('git commit -m "Lastest site built on successful travis build $TRAVIS_BUILD_NUMBER auto-pushed to github"')
	sh('git push -fq origin master')
end

task default: [:build]
